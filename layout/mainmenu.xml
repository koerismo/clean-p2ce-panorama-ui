<root>
	<styles>
		<include src="file://{resources}/styles/mainmenu/settings.sass" />
		<include src="file://{resources}/styles/mainmenu/mainmenu.sass" />
	</styles>
	<scripts>
		<include src="file://{resources}/scripts/mainmenu/states.js" />
		<include src="file://{resources}/scripts/mainmenu/transitions.js" />
		<include src="file://{resources}/scripts/mainmenu/settings.js" />
		<include src="file://{resources}/scripts/mainmenu/mainmenu.js" />
	</scripts>

	<snippets>
		<!-- None of this is used, I'm only keeping it here because the game refuses to launch without it. -->
		<snippet name="MainMenuMovieSnippet"><Panel></Panel>
		</snippet>
	</snippets>

	<ChaosMainMenu class="InitialDisplay MainMenuRootPanel" hittest="false" useglobalcontext="true" oncancel="MenuController.Escape();">
		<ChaosBackbufferImagePanel id="BackbufferImagePanel" />

		<Panel id="MainMenuContainerPanel">

			<!-- The actual panel with input & focus -->
			<Panel id="MainMenuInput">

				<Panel id="MainMenuCore" blurrects="ChaosLoadingScreen">

					<!-- Menu background -->
					<Panel id="MainMenuBackground">
						<Panel id="MainMenuMovieParent">
							<Movie
								id="MainMenuMovie"
								controls="none"
								repeat="true"
								hittest="false" />
						</Panel>
						<Panel id="MainMenuVanityParent"></Panel>
					</Panel>

					<Panel id="menu-root">
						<!-- Game logo: Appears on every screen -->
						<Image id="main-logo" defaultsrc="file://{images}/menu/p2ce/logo_title.png" scaling="stretch-to-cover-preserve-aspect" />

						<!-- Primary screen -->
						<Panel id="home-container" class="main-menu-page" data-page="main" data-esc="main" data-onleave="MenuController.MenuHideHomeSubmenus()">
							<Panel class="vertical-flow">
								<TextButton id="play-button" class="main-menu-button" onactivate="MenuController.MenuTogglePlayMenu()"	text="Play" />
								<TextButton class="main-menu-button" onactivate="MenuController.AnimateMenuPage('addons')"				text="Manage Addons" />
								<TextButton class="main-menu-button" onactivate="MenuController.AnimateMenuPage('settings')"			text="Settings" />
								<TextButton id="quit-button" class="main-menu-button" onactivate="MenuController.MenuToggleQuitMenu()"	text="Quit" />
							</Panel>
							<Panel id="home-submenu-container">
								<Panel class="vertical-flow" id="play-container">
									<TextButton class="main-menu-button mini" onactivate="MenuController.AnimateMenuPage('chapters')"	text="New Game" />
									<TextButton class="main-menu-button mini" onactivate="MenuController.AnimateMenuPage('saves')"		text="Load Save" />
								</Panel>
								<Panel class="vertical-flow" id="quit-container">
									<Panel class="main-menu-button-dummy" />
									<Panel class="main-menu-button-dummy" />
									<TextButton class="main-menu-button mini" onactivate="MenuController.MenuHideQuitMenu()"			text="Cancel" />
									<TextButton class="main-menu-button mini" onactivate="MenuController.Quit()"						text="Quit" />
								</Panel>
							</Panel>
						</Panel>

						<!-- Chapter select screen -->
						<Panel class="main-menu-page" data-page="chapters" data-esc="main">
							<TextButton class="main-menu-button" onactivate="MenuController.Escape()"						text="Not Ready :(" />
						</Panel>

						<!-- Save select screen -->
						<Panel class="main-menu-page" data-page="saves" data-esc="main">
							<TextButton class="main-menu-button" onactivate="MenuController.Escape()"						text="Not Ready :(" />
						</Panel>

						<!-- Settings screen -->
						<Panel id="settings-container" class="main-menu-page" data-page="settings" data-esc="main">
							<Panel id="settings"></Panel>
							<Panel id="settings-footer">
								<TextButton onactivate="MenuController.SettingsApply()" text="Apply" />
								<TextButton onactivate="MenuController.SettingsCancel()" text="Cancel" />
							</Panel>
						</Panel>

						<!-- Addon management screen -->
						<Panel class="main-menu-page" data-page="addons" data-esc="main">
							<TextButton class="main-menu-button" onactivate="MenuController.Escape()"						text="Not Ready :(" />
						</Panel>

						<!-- Pasue screen -->
						<Panel class="main-menu-page" data-page="paused" data-esc="main">
							<TextButton class="main-menu-button" onactivate="MenuController.MenuResume()"					text="Return To Game" />
							<TextButton class="main-menu-button" onactivate="MenuController.AnimateMenuPage('settings')"	text="Settings" />
							<TextButton class="main-menu-button" onactivate="MenuController.MenuDisconnect()"				text="Exit Map" />
						</Panel>

					</Panel>
				</Panel>
			</Panel>
		</Panel>

		<!-- Make sure these are at the bottom to get the z-order right -->
		<ChaosPopupManager id="PopupManager" onpopupsdismissed="" />
		<ContextMenuManager id="ContextMenuManager" />
		<ChaosTooltipManager id="TooltipManager" hittest="false" />

		<!-- Doesn't actually include the notifications, but we use its position to figure out where to show them -->
		<Panel id="SteamNotificationsPlaceholder" hittest="false" />
	</ChaosMainMenu>
</root>
